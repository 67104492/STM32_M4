#include  "OLED.h"

//驱动IC为SH1106 内存为132*64 用四线SPI比较好 三线的也行 不过不能使用硬件SPI 

//OLED的显存存放格式如下.
//[0]0 1 2 3 ... 127	
//[1]0 1 2 3 ... 127	
//[2]0 1 2 3 ... 127	
//[3]0 1 2 3 ... 127	
//[4]0 1 2 3 ... 127	
//[5]0 1 2 3 ... 127	
//[6]0 1 2 3 ... 127	
//[7]0 1 2 3 ... 127 	

#define X_WIDTH    132
#define Y_WIDTH    64
#define PAGE_GRAM  8
#define XLevelL	   0x00 //列地址的低四位 00H - 0FH
#define XLevelH	   0x10 //列地址的高四位 10H - 1FH
#define MOSI_H  GPIO_SetBits(GPIOC,GPIO_Pin_12)    //输出高电平   数据输入信号
#define MOSI_L  GPIO_ResetBits(GPIOC,GPIO_Pin_12)  //输出低电平

#define SLCK_H  GPIO_SetBits(GPIOC,GPIO_Pin_10)    //输出高电平   时钟信号
#define SLCK_L  GPIO_ResetBits(GPIOC,GPIO_Pin_10)  //输出低电平

#define CS_H    GPIO_SetBits(GPIOA,GPIO_Pin_15)    //输出高电平   片选信号
#define CS_L    GPIO_ResetBits(GPIOA,GPIO_Pin_15)  //输出低电平

//SH1106 RAM 132 X 64 bits  8PAGE/132bit 
u8  OLED_GRAM[X_WIDTH][PAGE_GRAM];//128*64显示的时候 坐标位置为 2 ~ 129 (0 1 130 131 这四个点显示不出来)

const u8 F7x8[][7] = //字库已经修改 为了适应反显模式
{
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },   // sp
    { 0x00, 0x00, 0x00, 0x2f, 0x00, 0x00, 0x00 },   // !
    { 0x00, 0x00, 0x07, 0x00, 0x07, 0x00, 0x00 },   // "
    { 0x00, 0x14, 0x7f, 0x14, 0x7f, 0x14, 0x00 },   // #
    { 0x00, 0x24, 0x2a, 0x7f, 0x2a, 0x12, 0x00 },   // $
    { 0x00, 0x62, 0x64, 0x08, 0x13, 0x23, 0x00 },   // %
    { 0x00, 0x36, 0x49, 0x55, 0x22, 0x50, 0x00 },   // &
    { 0x00, 0x00, 0x05, 0x03, 0x00, 0x00, 0x00 },   // '
    { 0x00, 0x00, 0x1c, 0x22, 0x41, 0x00, 0x00 },   // (
    { 0x00, 0x00, 0x41, 0x22, 0x1c, 0x00, 0x00 },   // )
    { 0x00, 0x14, 0x08, 0x3E, 0x08, 0x14, 0x00 },   // *
    { 0x00, 0x08, 0x08, 0x3E, 0x08, 0x08, 0x00 },   // +
    { 0x00, 0x00, 0x00, 0xA0, 0x60, 0x00, 0x00 },   // ,
    { 0x00, 0x08, 0x08, 0x08, 0x08, 0x08, 0x00 },   // -
    { 0x00, 0x00, 0x60, 0x60, 0x00, 0x00, 0x00 },   // .
    { 0x00, 0x20, 0x10, 0x08, 0x04, 0x02, 0x00 },   // /
    { 0x00, 0x3E, 0x51, 0x49, 0x45, 0x3E, 0x00 },   // 0
    { 0x00, 0x00, 0x42, 0x7F, 0x40, 0x00, 0x00 },   // 1
    { 0x00, 0x42, 0x61, 0x51, 0x49, 0x46, 0x00 },   // 2
    { 0x00, 0x21, 0x41, 0x45, 0x4B, 0x31, 0x00 },   // 3
    { 0x00, 0x18, 0x14, 0x12, 0x7F, 0x10, 0x00 },   // 4
    { 0x00, 0x27, 0x45, 0x45, 0x45, 0x39, 0x00 },   // 5
    { 0x00, 0x3C, 0x4A, 0x49, 0x49, 0x30, 0x00 },   // 6
    { 0x00, 0x01, 0x71, 0x09, 0x05, 0x03, 0x00 },   // 7
    { 0x00, 0x36, 0x49, 0x49, 0x49, 0x36, 0x00 },   // 8
    { 0x00, 0x06, 0x49, 0x49, 0x29, 0x1E, 0x00 },   // 9
    { 0x00, 0x00, 0x36, 0x36, 0x00, 0x00, 0x00 },   // :
    { 0x00, 0x00, 0x56, 0x36, 0x00, 0x00, 0x00 },   // ;
    { 0x00, 0x08, 0x14, 0x22, 0x41, 0x00, 0x00 },   // <
    { 0x00, 0x14, 0x14, 0x14, 0x14, 0x14, 0x00 },   // =
    { 0x00, 0x00, 0x41, 0x22, 0x14, 0x08, 0x00 },   // >
    { 0x00, 0x02, 0x01, 0x51, 0x09, 0x06, 0x00 },   // ?
    { 0x00, 0x32, 0x49, 0x59, 0x51, 0x3E, 0x00 },   // @
    { 0x00, 0x7C, 0x12, 0x11, 0x12, 0x7C, 0x00 },   // A
    { 0x00, 0x7F, 0x49, 0x49, 0x49, 0x36, 0x00 },   // B
    { 0x00, 0x3E, 0x41, 0x41, 0x41, 0x22, 0x00 },   // C
    { 0x00, 0x7F, 0x41, 0x41, 0x22, 0x1C, 0x00 },   // D
    { 0x00, 0x7F, 0x49, 0x49, 0x49, 0x41, 0x00 },   // E
    { 0x00, 0x7F, 0x09, 0x09, 0x09, 0x01, 0x00 },   // F
    { 0x00, 0x3E, 0x41, 0x49, 0x49, 0x7A, 0x00 },   // G
    { 0x00, 0x7F, 0x08, 0x08, 0x08, 0x7F, 0x00 },   // H
    { 0x00, 0x00, 0x41, 0x7F, 0x41, 0x00, 0x00 },   // I
    { 0x00, 0x20, 0x40, 0x41, 0x3F, 0x01, 0x00 },   // J
    { 0x00, 0x7F, 0x08, 0x14, 0x22, 0x41, 0x00 },   // K
    { 0x00, 0x7F, 0x40, 0x40, 0x40, 0x40, 0x00 },   // L
    { 0x00, 0x7F, 0x02, 0x0C, 0x02, 0x7F, 0x00 },   // M
    { 0x00, 0x7F, 0x04, 0x08, 0x10, 0x7F, 0x00 },   // N
    { 0x00, 0x3E, 0x41, 0x41, 0x41, 0x3E, 0x00 },   // O
    { 0x00, 0x7F, 0x09, 0x09, 0x09, 0x06, 0x00 },   // P
    { 0x00, 0x3E, 0x41, 0x51, 0x21, 0x5E, 0x00 },   // Q
    { 0x00, 0x7F, 0x09, 0x19, 0x29, 0x46, 0x00 },   // R
    { 0x00, 0x46, 0x49, 0x49, 0x49, 0x31, 0x00 },   // S
    { 0x00, 0x01, 0x01, 0x7F, 0x01, 0x01, 0x00 },   // T
    { 0x00, 0x3F, 0x40, 0x40, 0x40, 0x3F, 0x00 },   // U
    { 0x00, 0x1F, 0x20, 0x40, 0x20, 0x1F, 0x00 },   // V
    { 0x00, 0x3F, 0x40, 0x38, 0x40, 0x3F, 0x00 },   // W
    { 0x00, 0x63, 0x14, 0x08, 0x14, 0x63, 0x00 },   // X
    { 0x00, 0x07, 0x08, 0x70, 0x08, 0x07, 0x00 },   // Y
    { 0x00, 0x61, 0x51, 0x49, 0x45, 0x43, 0x00 },   // Z
    { 0x00, 0x00, 0x7F, 0x41, 0x41, 0x00, 0x00 },   // [
    { 0x00, 0x55, 0x2A, 0x55, 0x2A, 0x55, 0x00 },   // 55
    { 0x00, 0x00, 0x41, 0x41, 0x7F, 0x00, 0x00 },   // ]
    { 0x00, 0x04, 0x02, 0x01, 0x02, 0x04, 0x00 },   // ^
    { 0x00, 0x40, 0x40, 0x40, 0x40, 0x40, 0x00 },   // _
    { 0x00, 0x00, 0x01, 0x02, 0x04, 0x00, 0x00 },   // '
    { 0x00, 0x20, 0x54, 0x54, 0x54, 0x78, 0x00 },   // a
    { 0x00, 0x7F, 0x48, 0x44, 0x44, 0x38, 0x00 },   // b
    { 0x00, 0x38, 0x44, 0x44, 0x44, 0x20, 0x00 },   // c
    { 0x00, 0x38, 0x44, 0x44, 0x48, 0x7F, 0x00 },   // d
    { 0x00, 0x38, 0x54, 0x54, 0x54, 0x18, 0x00 },   // e
    { 0x00, 0x08, 0x7E, 0x09, 0x01, 0x02, 0x00 },   // f
    { 0x00, 0x18, 0xA4, 0xA4, 0xA4, 0x7C, 0x00 },   // g
    { 0x00, 0x7F, 0x08, 0x04, 0x04, 0x78, 0x00 },   // h
    { 0x00, 0x00, 0x44, 0x7D, 0x40, 0x00, 0x00 },   // i
    { 0x00, 0x40, 0x80, 0x84, 0x7D, 0x00, 0x00 },   // j
    { 0x00, 0x7F, 0x10, 0x28, 0x44, 0x00, 0x00 },   // k
    { 0x00, 0x00, 0x41, 0x7F, 0x40, 0x00, 0x00 },   // l
    { 0x00, 0x7C, 0x04, 0x18, 0x04, 0x78, 0x00 },   // m
    { 0x00, 0x7C, 0x08, 0x04, 0x04, 0x78, 0x00 },   // n
    { 0x00, 0x38, 0x44, 0x44, 0x44, 0x38, 0x00 },   // o
    { 0x00, 0xFC, 0x24, 0x24, 0x24, 0x18, 0x00 },   // p
    { 0x00, 0x18, 0x24, 0x24, 0x18, 0xFC, 0x00 },   // q
    { 0x00, 0x7C, 0x08, 0x04, 0x04, 0x08, 0x00 },   // r
    { 0x00, 0x48, 0x54, 0x54, 0x54, 0x20, 0x00 },   // s
    { 0x00, 0x04, 0x3F, 0x44, 0x40, 0x20, 0x00 },   // t
    { 0x00, 0x3C, 0x40, 0x40, 0x20, 0x7C, 0x00 },   // u
    { 0x00, 0x1C, 0x20, 0x40, 0x20, 0x1C, 0x00 },   // v
    { 0x00, 0x3C, 0x40, 0x30, 0x40, 0x3C, 0x00 },   // w
    { 0x00, 0x44, 0x28, 0x10, 0x28, 0x44, 0x00 },   // x
    { 0x00, 0x1C, 0xA0, 0xA0, 0xA0, 0x7C, 0x00 },   // y
    { 0x00, 0x44, 0x64, 0x54, 0x4C, 0x44, 0x00 },   // z
    { 0x14, 0x14, 0x14, 0x14, 0x14, 0x14, 0x14 },   // horiz lines
};
const u8 F8X16[][16]=
{
  { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 },// 0
  { 0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x30,0x00,0x00,0x00 },//!1
  { 0x00,0x10,0x0C,0x06,0x10,0x0C,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 },//"2
  { 0x40,0xC0,0x78,0x40,0xC0,0x78,0x40,0x00,0x04,0x3F,0x04,0x04,0x3F,0x04,0x04,0x00 },//#3
  { 0x00,0x70,0x88,0xFC,0x08,0x30,0x00,0x00,0x00,0x18,0x20,0xFF,0x21,0x1E,0x00,0x00 },//$4
  { 0xF0,0x08,0xF0,0x00,0xE0,0x18,0x00,0x00,0x00,0x21,0x1C,0x03,0x1E,0x21,0x1E,0x00 },//%5
  { 0x00,0xF0,0x08,0x88,0x70,0x00,0x00,0x00,0x1E,0x21,0x23,0x24,0x19,0x27,0x21,0x10 },//&6
  { 0x10,0x16,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 },//'7
  { 0x00,0x00,0x00,0xE0,0x18,0x04,0x02,0x00,0x00,0x00,0x00,0x07,0x18,0x20,0x40,0x00 },//(8
  { 0x00,0x02,0x04,0x18,0xE0,0x00,0x00,0x00,0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00 },//)9
  { 0x40,0x40,0x80,0xF0,0x80,0x40,0x40,0x00,0x02,0x02,0x01,0x0F,0x01,0x02,0x02,0x00 },//*10
  { 0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x1F,0x01,0x01,0x01,0x00 },//+11
  { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xB0,0x70,0x00,0x00,0x00,0x00,0x00 },//,12
  { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01 },//-13
  { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00 },//.14
  { 0x00,0x00,0x00,0x00,0x80,0x60,0x18,0x04,0x00,0x60,0x18,0x06,0x01,0x00,0x00,0x00 },///15
  { 0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00 },//016
  { 0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00 },//117
  { 0x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00 },//218
  { 0x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00 },//319
  { 0x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00 },//420
  { 0x00,0xF8,0x08,0x88,0x88,0x08,0x08,0x00,0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00 },//521
  { 0x00,0xE0,0x10,0x88,0x88,0x18,0x00,0x00,0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00 },//622
  { 0x00,0x38,0x08,0x08,0xC8,0x38,0x08,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00 },//723
  { 0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00 },//824
  { 0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x00,0x31,0x22,0x22,0x11,0x0F,0x00 },//925
  { 0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00 },//:26
  { 0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x00,0x00,0x00,0x00 },//;27
  { 0x00,0x00,0x80,0x40,0x20,0x10,0x08,0x00,0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x00 },//<28
  { 0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00 },//=29
  { 0x00,0x08,0x10,0x20,0x40,0x80,0x00,0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,0x00 },//>30
  { 0x00,0x70,0x48,0x08,0x08,0x08,0xF0,0x00,0x00,0x00,0x00,0x30,0x36,0x01,0x00,0x00 },//?31
  { 0xC0,0x30,0xC8,0x28,0xE8,0x10,0xE0,0x00,0x07,0x18,0x27,0x24,0x23,0x14,0x0B,0x00 },//@32
  { 0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20 },//A33
  { 0x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00 },//B34
  { 0xC0,0x30,0x08,0x08,0x08,0x08,0x38,0x00,0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00 },//C35
  { 0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00 },//D36
  { 0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00 },//E37
  { 0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x00,0x03,0x00,0x00,0x00 },//F38
  { 0xC0,0x30,0x08,0x08,0x08,0x38,0x00,0x00,0x07,0x18,0x20,0x20,0x22,0x1E,0x02,0x00 },//G39
  { 0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x20,0x3F,0x21,0x01,0x01,0x21,0x3F,0x20 },//H40
  { 0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00 },//I41
  { 0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,0x00 },//J42
  { 0x08,0xF8,0x88,0xC0,0x28,0x18,0x08,0x00,0x20,0x3F,0x20,0x01,0x26,0x38,0x20,0x00 },//K43
  { 0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00 },//L44
  { 0x08,0xF8,0xF8,0x00,0xF8,0xF8,0x08,0x00,0x20,0x3F,0x00,0x3F,0x00,0x3F,0x20,0x00 },//M45
  { 0x08,0xF8,0x30,0xC0,0x00,0x08,0xF8,0x08,0x20,0x3F,0x20,0x00,0x07,0x18,0x3F,0x00 },//N46
  { 0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00 },//O47
  { 0x08,0xF8,0x08,0x08,0x08,0x08,0xF0,0x00,0x20,0x3F,0x21,0x01,0x01,0x01,0x00,0x00 },//P48
  { 0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x18,0x24,0x24,0x38,0x50,0x4F,0x00 },//Q49
  { 0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20 },//R50
  { 0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00 },//S51
  { 0x18,0x08,0x08,0xF8,0x08,0x08,0x18,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00 },//T52
  { 0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00 },//U53
  { 0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00 },//V54
  { 0xF8,0x08,0x00,0xF8,0x00,0x08,0xF8,0x00,0x03,0x3C,0x07,0x00,0x07,0x3C,0x03,0x00 },//W55
  { 0x08,0x18,0x68,0x80,0x80,0x68,0x18,0x08,0x20,0x30,0x2C,0x03,0x03,0x2C,0x30,0x20 },//X56
  { 0x08,0x38,0xC8,0x00,0xC8,0x38,0x08,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00 },//Y57
  { 0x10,0x08,0x08,0x08,0xC8,0x38,0x08,0x00,0x20,0x38,0x26,0x21,0x20,0x20,0x18,0x00 },//Z58
  { 0x00,0x00,0x00,0xFE,0x02,0x02,0x02,0x00,0x00,0x00,0x00,0x7F,0x40,0x40,0x40,0x00 },//[59
  { 0x00,0x0C,0x30,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x38,0xC0,0x00 },//\60
  { 0x00,0x02,0x02,0x02,0xFE,0x00,0x00,0x00,0x00,0x40,0x40,0x40,0x7F,0x00,0x00,0x00 },//]61
  { 0x00,0x00,0x04,0x02,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 },//^62
  { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80 },//_63
  { 0x00,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 },//`64
  { 0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20 },//a65
  { 0x08,0xF8,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x3F,0x11,0x20,0x20,0x11,0x0E,0x00 },//b66
  { 0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x0E,0x11,0x20,0x20,0x20,0x11,0x00 },//c67
  { 0x00,0x00,0x00,0x80,0x80,0x88,0xF8,0x00,0x00,0x0E,0x11,0x20,0x20,0x10,0x3F,0x20 },//d68
  { 0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00 },//e69
  { 0x00,0x80,0x80,0xF0,0x88,0x88,0x88,0x18,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00 },//f70
  { 0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x6B,0x94,0x94,0x94,0x93,0x60,0x00 },//g71
  { 0x08,0xF8,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20 },//h72
  { 0x00,0x80,0x98,0x98,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00 },//i73
  { 0x00,0x00,0x00,0x80,0x98,0x98,0x00,0x00,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00 },//j74
  { 0x08,0xF8,0x00,0x00,0x80,0x80,0x80,0x00,0x20,0x3F,0x24,0x02,0x2D,0x30,0x20,0x00 },//k75
  { 0x00,0x08,0x08,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00 },//l76
  { 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x20,0x3F,0x20,0x00,0x3F,0x20,0x00,0x3F },//m77
  { 0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20 },//n78
  { 0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00 },//o79
  { 0x80,0x80,0x00,0x80,0x80,0x00,0x00,0x00,0x80,0xFF,0xA1,0x20,0x20,0x11,0x0E,0x00 },//p80
  { 0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x0E,0x11,0x20,0x20,0xA0,0xFF,0x80 },//q81
  { 0x80,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x20,0x20,0x3F,0x21,0x20,0x00,0x01,0x00 },//r82
  { 0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x33,0x24,0x24,0x24,0x24,0x19,0x00 },//s83
  { 0x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00 },//t84
  { 0x80,0x80,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x1F,0x20,0x20,0x20,0x10,0x3F,0x20 },//u85
  { 0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x00,0x01,0x0E,0x30,0x08,0x06,0x01,0x00 },//v86
  { 0x80,0x80,0x00,0x80,0x00,0x80,0x80,0x80,0x0F,0x30,0x0C,0x03,0x0C,0x30,0x0F,0x00 },//w87
  { 0x00,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x31,0x2E,0x0E,0x31,0x20,0x00 },//x88
  { 0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x80,0x81,0x8E,0x70,0x18,0x06,0x01,0x00 },//y89
  { 0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x21,0x30,0x2C,0x22,0x21,0x30,0x00 },//z90
  { 0x00,0x00,0x00,0x00,0x80,0x7C,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x3F,0x40,0x40 },//{91
  { 0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00 },//|92
  { 0x00,0x02,0x02,0x7C,0x80,0x00,0x00,0x00,0x00,0x40,0x40,0x3F,0x00,0x00,0x00,0x00 },//}93
  { 0x00,0x06,0x01,0x01,0x02,0x02,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 },//~94

};
const u8 F14x16_Idx[] = 
{
  "你好"
};
const u8 F14x16[] = {  

0x00,0x80,0x40,0xF8,0x06,0x40,0x30,0x1E,0xF0,0x10,0x10,0x30,0x10,0x00,
0x00,0x00,0x00,0x7F,0x20,0x18,0x07,0x40,0x7F,0x00,0x01,0x02,0x1C,0x00,//你0

0x00,0x00,0xE0,0x1E,0x10,0xF0,0x00,0x04,0x04,0xE4,0x14,0x0C,0x80,0x00,
0x00,0x44,0x27,0x18,0x0F,0x10,0x01,0x01,0x41,0x7F,0x01,0x01,0x01,0x00,//好1
};



/*-------------------------------------------------------------*/
//函数名： void LCD_PutPixel(byte x,byte y)
//功能：   GPIO模拟SPI初始化
//参数：  无
//返回：  无
/*-------------------------------------------------------------*/
void OLED_GPIO_Init(void) //OLED 软件模拟SPI初始化 无法使用硬件SPI 应为传输的只有8位和16位两个选择 四线SPI模式就可以使用硬件SPI
{	 
  GPIO_InitTypeDef  GPIOA_InitStructure;//A口结构体
  GPIO_InitTypeDef  GPIOC_InitStructure;//C口结构体
	
  RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);//使能GPIOA时钟
  RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOC, ENABLE);//使能GPIOC时钟
  
  GPIOA_InitStructure.GPIO_Pin = GPIO_Pin_15;//片选引脚
  GPIOA_InitStructure.GPIO_Mode = GPIO_Mode_OUT;//输出
  GPIOA_InitStructure.GPIO_OType = GPIO_OType_PP;//推挽输出
  GPIOA_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;//100MHz 最高速度
  GPIOA_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;//上拉
  GPIO_Init(GPIOA, &GPIOA_InitStructure);//初始化
  
  GPIOC_InitStructure.GPIO_Pin = GPIO_Pin_10|GPIO_Pin_12;//SCK MOSI 引脚
  GPIOC_InitStructure.GPIO_Mode = GPIO_Mode_OUT;//输出
  GPIOC_InitStructure.GPIO_OType = GPIO_OType_PP;//推挽输出
  GPIOC_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;//100MHz 最高速度
  GPIOC_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;//上拉
  GPIO_Init(GPIOC, &GPIOC_InitStructure);//初始化
  
}   
/*-------------------------------------------------------------*/
//函数名： void OLED_WrDat(u8 data)
//功能：   往OLED写数据
//参数：   data
//返回：   无
/*-------------------------------------------------------------*/
void OLED_WrDat(u8 data) //写数据 D/C=1  九位数据 D/C D7 D6 D5 D4 D3 D2 D1 D0
{
	u8 i=8;
	CS_L; //片选有效
        
        SLCK_L;//传输D/C位 先变低 传输MOSI后上升沿
        MOSI_H; //高电平 传输数据
        asm("nop");   
        SLCK_H;    //一个时钟周期
        asm("nop");   
        SLCK_L;
  while(i--)
  {
    if(data&0x80) //数据转为八位二进制 传输数据  按位或
    {
      MOSI_H;
    }
    else
    {
      MOSI_L;
    }
    
    SLCK_H;    //一个时钟周期
    asm("nop");   
    SLCK_L;
    data<<=1; //表示data左移n位(二进制)
  }
    CS_H;
}
/*-------------------------------------------------------------*/
//函数名： void OLED_WrCmd(u8 cmd)
//功能：   往OLED写命令
//参数：   cmd
//返回：   无
/*-------------------------------------------------------------*/
void OLED_WrCmd(u8 cmd) //写命令 D/C=0
{
	u8 i=8;
	CS_L; //片选有效
        
        SLCK_L;//传输D/C位 先变低 传输MOSI后上升沿
        MOSI_L; //高电平 传输命令
        asm("nop");   
        SLCK_H;    //一个时钟周期
       asm("nop");   
        SLCK_L;
        
  while(i--)
  {
    if(cmd&0x80) //数据转为八位二进制 传输数据  按位或
    {
      MOSI_H;
    }
    else
    {
      MOSI_L;
    }
    
    SLCK_H;    //一个时钟周期
    asm("nop");   
    SLCK_L;
    cmd<<=1; //表示cmd左移n位(二进制)
  }
    CS_H;
}
/*-------------------------------------------------------------*/
//函数名： void OLED_Refresh_Gram(void)
//功能：   更新显存到OLED
//参数：   无
//返回：   无
/*-------------------------------------------------------------*/
void OLED_Refresh_Gram(void)
{
    u8 i,n;		    
    for(i=0;i<8;i++)  
    {  
	OLED_WrCmd (0xB0+i);       //设置页地址 B0H - B7H
	OLED_WrCmd (XLevelL);      //设置显示位置―列低地址
	OLED_WrCmd (XLevelH);      //设置显示位置―列高地址   
	for(n=0;n<X_WIDTH;n++)OLED_WrDat(OLED_GRAM[n][i]); 
    }   
}

/*-------------------------------------------------------------*/
//函数名： void OLED_Set_Pos(u8 x, u8 y)
//功能：   设置坐标位置
//参数：   x y
//返回：   无
/*-------------------------------------------------------------*/
void OLED_Set_Pos(u8 x, u8 y)
{ 
  x=x+2;
  OLED_WrCmd(0xB0+y);              
  OLED_WrCmd(((x&0xf0)>>4)|0x10);
  OLED_WrCmd((x&0x0f)|0x00); 
}

/*-------------------------------------------------------------*/
//函数名： void OLED_Clear(void)  
//功能：   清屏函数
//参数：   mode 1 填充 0 清屏 全黑
//返回：   无
/*-------------------------------------------------------------*/
void OLED_Clear(void)  
{  
    u8 i,n;  
    for(i=0;i<8;i++)for(n=0;n<X_WIDTH;n++)OLED_GRAM[n][i]=0x00;  
    OLED_Refresh_Gram();//更新显示
        
}
/*-------------------------------------------------------------*/
//函数名： void OLED_DrawPoint(u8 x,u8 y,u8 mode)
//功能：   画一个点 通过GRAM操作 只要GRAM的内容不被覆盖就没事
//参数：   x y 已经针对SH1106X修改现实的坐标 mode 1 填充 0 清屏 全黑
//返回：   无
/*-------------------------------------------------------------*/
void OLED_DrawPoint(u8 x,u8 y,u8 mode)
{
	u8 pos,bx,temp=0;
        x=x+2;//SH1106需要对显示地址偏移
	if(x>129||y>63)return;//超出范围了.
	pos=y/8;//确定在第几页
	bx=y%8;
	temp=1<<bx;
	if( mode)OLED_GRAM[x][pos]|=temp;
	else OLED_GRAM[x][pos]&=~temp;	  
        OLED_Refresh_Gram();//更新显存
}

/*-------------------------------------------------------------*/
//函数名： void OLED_F7x8Str(u8 x,u8 y,u8 ch[],u8 mode)
//功能：   写入一组标准ASCII字符串
//参数：   （x,y），y为页范围0～7，要显示的字符串,mode(1/0,正常/反显)
//返回：   无
/*-------------------------------------------------------------*/
void OLED_F7x8Str(u8 x,u8 y,u8 ch[],u8 mode)
{     
  u8 c=0,i=0,j=0;  
  x=x+2;//针对SH1106
  while (ch[j]!='\0')
  {    
    c =ch[j]-32;           //取得偏移位置
    if(x>126){x=2;y++;}   //自动换行 换页防止溢出
    if(y>7) {y=0;}
  	for(i=0;i<7;i++) //输出完一个字符
        { 
          if(mode==1)
          {
  	     OLED_GRAM[x][y]=F7x8[c][i];//正常
          }
          else if (mode==0)
          {
            OLED_GRAM[x][y]=~F7x8[c][i];//取反
          }
  	  x+=1;//换列
        }
     j++;//字符串的第几个字符
   }
  	OLED_Refresh_Gram();//更新显存
}
/*-------------------------------------------------------------*/
//函数名： void OELD_Init(void)  SH1106驱动
//功能：   初始化函数
//参数：   无
//返回：   无
/*-------------------------------------------------------------*/
void OELD_Init(void)  
{        
   OLED_GPIO_Init();   //GPIO初始化
 
   OLED_WrCmd(0xAE);   //――关闭OLED显示       AEH - AFH  关(输入命令)/开
   OLED_WrCmd(0xD5);   //――设置时钟分频因子
   OLED_WrCmd(0x80);   //――分频设置           00H - 3FH     [3:0],分频因子;[7:4],震荡频率
   OLED_WrCmd(0xA8);   //――驱动路数设置       A8H           
   OLED_WrCmd(0x3F);   //――设置驱动路数       00H - 3FH     1/64
   OLED_WrCmd(0xD3);   //――设置显示偏移地址
   OLED_WrCmd(0x00);   //――显示偏移地址       00H ~ 3FH
   OLED_WrCmd(0x40);   //――设置显示起始线：   40H - 7FH
   OLED_WrCmd(0xAD);   //――设置电荷泵 
   OLED_WrCmd(0x8B);   //――电荷泵开/关        8AH - 8BH     8AH关闭     8BH开启
   OLED_WrCmd(0xA1);   //――段落重定义：       A0H - A1H     A0H左右反置 A1H正常
   OLED_WrCmd(0xC8);   //――扫描方向           C0H - C8H     C0H正常    C8H反向COM [N -1] to COM0
   OLED_WrCmd(0xDA);   //――设置硬件引脚          
   OLED_WrCmd(0x12);   //――引脚配置           02H - 12H    02H(Sequential) 12H(Alternative)
   OLED_WrCmd(0x81);   //――对比度模式设置：   81H
   OLED_WrCmd(0XCF);   //――对比度寄存器：     00H - FFH 256个灰度级
   OLED_WrCmd(0xD9);   //――设置预充电周期
   OLED_WrCmd(0x22);   //――充电周期设置       00H - FFH    [3:0],PHASE 1;[7:4],PHASE 2;
   OLED_WrCmd(0xDB);   //――设置VCOMH 电压倍率
   OLED_WrCmd(0x40);   //――电压倍率           00H - FFH
   OLED_WrCmd(0x32);   //――设置电荷泵电压：   30H ~ 33H    8V
   OLED_WrCmd(0xA6);   //――设置显示方式       A6H - A7H    A6H正常显示 A7H反向显示  
   OLED_Clear();
   OLED_WrCmd(0xAF);   //――开启显示
  
} 
/*-------------------------------------------------------------*/
//函数名：  void OLED_P8x16Str(u8 x,u8 y,u8 ch[],u8 mode)
//功能：   写入一组标准ASCII字符串
//参数：   显示的位置（x,y），y为页范围0～7，要显示的字符串
//返回：   无
/*-------------------------------------------------------------*/
void OLED_P8x16Str(u8 x,u8 y,u8 ch[],u8 mode)
{
 u8 c=0,i=0,j=0;  
  x=x+2;//针对SH1106
  while (ch[j]!='\0')
  {    
    c =ch[j]-32;           //取得偏移位置
    if(x>123){x=2;y=y+2;}   //自动换行 换页防止溢出
    if(y>7) {y=0;}
  	for(i=0;i<8;i++) //输出完一个字符
        { 
          if(mode==1)
          { 
  	     OLED_GRAM[x][y]=F8X16[c][i];//低八位
             OLED_GRAM[x][y+1]=F8X16[c][i+8];//高八位
          }
          else if (mode==0)
          {
             OLED_GRAM[x][y]=~F8X16[c][i];//低八位
             OLED_GRAM[x][y+1]=~F8X16[c][i+8];//高八位
          }
  	  x+=1;//换列
        }
     j++;//字符串的第几个字符
   }
  	OLED_Refresh_Gram();//更新显存
}
/*-------------------------------------------------------------*/
//函数名：  void OLED_P14x16CheStr(u8 x,u8 y,u8 ch[],u8 mode)
//功能：   输出汉字字符串
//参数：   显示的位置（x,y），y为页范围0～7，要显示的字符串 mode 正常显示或者反显
//返回：   无
/*-------------------------------------------------------------*/
void OLED_P14x16CheStr(u8 x,u8 y,u8 ch[],u8 mode)
{
	u8 wm=0,ii = 0;
	u8 adder=1; 
	x=x+2;  //针对SH1106处理
        u8 x_temp=0;//x的缓存 防止地址显示出来错位
	while(ch[ii] != '\0')//输出完汉字串
	{
  	wm = 0;
  	adder = 1;
  	while(F14x16_Idx[wm] > 129)
  	{
  	  if(F14x16_Idx[wm] == ch[ii])
  	   {
  	      if(F14x16_Idx[wm + 1] == ch[ii + 1])
  		{
  		   adder = wm * 14;
  		   break;
  		}
  	   }
  		wm += 2;			
  	}
        
  	if(x>120){x=2;y++;}
  
  	if(adder != 1)// 显示汉字					
  	{
  	
              x_temp=x;
  	     for(wm = 0;wm < 14;wm++)               
  		{
                  if (mode==1)
                  {
  		     OLED_GRAM[x_temp][y]=F14x16[adder];
                  }
                  else if (mode==0)
                  {
                     OLED_GRAM[x_temp][y]=~F14x16[adder];//反显
                  }
  		   adder += 1;//地址这块需要连续累加
                    x_temp+=1;//但是不能让x在输出高位的时候累加
  		}      
  	 
  		for(wm = 0;wm < 14;wm++)          
  		{
  		  if (mode==1)
                  {
  		     OLED_GRAM[x][y+1]=F14x16[adder];
                  }
                  else if (mode==0)
                  {
                     OLED_GRAM[x][y+1]=~F14x16[adder];//反显
                  }
  		   adder += 1;
                   x+=1;
  		}
  	}
  	else			  //显示空白字符			
  	{
  	   ii += 1;
  
            x_temp=x;
  	    for(wm = 0;wm < 16;wm++)
  		{
  		  if (mode==1)
                  {
  		     OLED_GRAM[x_temp][y]=0x00;
                  }
                  else if (mode==0)
                  {
                     OLED_GRAM[x_temp][y]=0xff;//反显
                  }
                   x_temp+=1;
  		}
  
  	    for(wm = 0;wm < 16;wm++)
  		{   		
  		  if (mode==1)
                  {
  		     OLED_GRAM[x][y+1]=0x00;
                  }
                  else if (mode==0)
                  {
                     OLED_GRAM[x][y+1]=0xff;//反显
                  }
                   x+=1;
  		}
  	}
  	   ii += 2;
	}
        OLED_Refresh_Gram();//更新显存
}
/*-------------------------------------------------------------*/
//函数名： void OLED_write_char(u8 X, u8 Y,u16 c)
//功能：   显示一个字符
//参数：   显示的位置（x,y），y为页范围0～7，要显示的字符
//返回：   无
/*-------------------------------------------------------------*/
void OLED_write_char(u8 X, u8 Y,u16 c)
{
 	 
    u8 line;
	OLED_Set_Pos(X,Y);
    c -= 32;
    for (line=0; line<6; line++)
	{
        OLED_WrDat(F7x8[c][line]);
	}
}
/*-------------------------------------------------------------*/
//函数名： void OLED_Show_Number (u8 X,u8 Y,u16 number) 
//功能：   显示四个数字
//参数：   显示的位置（x,y），y为页范围0～7，要显示的字
//返回：   无
/*-------------------------------------------------------------*/
void OLED_Show_Number (u8 X,u8 Y,u16 number) 
{
   OLED_write_char(X+6,Y, number%10000/1000+48);
   OLED_write_char(X+12,Y,number%1000/100+48);
   OLED_write_char(X+18,Y,number%100/10+48);
   OLED_write_char(X+24,Y,number%10+48); 
   
   
}

/*-------------------------------------------------------------*/
//函数名： void OLED_Write_Num(u8 X,u8 Y,u16 num,u8 N)
//功能：   显示五位要显示的数字
//参数：   显示的位置（x,y），y为页范围0～7，要显示的数字
//返回：   无
/*-------------------------------------------------------------*/
void OLED_Write_Num(u8 X,u8 Y,u16 num,u8 N)
{
   u8 line;
   u8 i=0;
   u16 n[5]={0};
   n[0]= num%10;
   n[1]=(num/10)%10;
   n[2]=(num/100)%10;
   n[3]=(num/1000)%10;
   n[4]=(num/10000)%10;
   for(i=0;i<5;i++) n[i]=n[i]+16;
     for(i=N;i>0;i--) 
      {
          OLED_Set_Pos(X+(N-i)*6,Y);//光标定位
           for (line=0; line<6; line++)
              OLED_WrDat(F7x8[n[i-1]][line]);//从ACSII码表中读取字节，然后写入液晶
  }
}